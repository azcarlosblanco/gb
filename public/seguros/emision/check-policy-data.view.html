<div class="modal-backdrop">
	<div class="modal bs-example-modal-lg in" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" style="display: block; /*padding-right: 17px;*/">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" ui-sref="^" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">×</span>
					</button>
					<h4 class="modal-title" id="myLargeModalLabel">
						Emisiones - Confirmación Datos de la Póliza
					</h4>
				</div>
				<div class="modal-body">
					<form name="modalForm" class="form-horizontal clearfix" ng-submit="">
						<div class="form-section" id="section-1">
							<h5>
								<span>DATOS GENERALES</span>
							</h5>
							<div class="container-fluid con-margin">
								<div class="row">
									<div class="form-group">
										<label for="cname" class="col-xs-12 col-sm-3 control-label">Nombre del Cliente:</label>
										<div class="col-xs-12 col-sm-9 col-md-6">
											<span class="form-control">{{ catalog.client_name }}</span>
										</div>
									</div>
									<div class="form-group">
										<label for="clastname" class="col-xs-12 col-sm-3 control-label">Plan / Opción :</label>
										<div class="col-xs-12 col-sm-9 col-md-6">
											<span class="form-control">{{ catalog.plan }} / {{ catalog.deductibles }}</span>
										</div>
									</div>
									<div class="form-group" ng-class="{'highlight': focused[num_policy], 'invalid' : !modalForm[num_policy].$valid && modalForm[num_policy].$touched}">
										<label for="num_policy" class="col-xs-12 col-sm-3 control-label">Número de Póliza:</label>
										<div class="col-xs-12 col-sm-9 col-md-6">
											<input class="form-control" type="text" id="num_policy" value="{{ form.num_policy }}" name="num_policy" ng-model="form.num_policy" ng-init="form.num_policy" placeholder="# Póliza" ng-required=1 focus="{{$parent.$parent.$first && $first}}" ng-readonly="0"
															ng-blur="focused[num_policy] = false" autocomplete="off">
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="form-section" id="section-2">
							<h5>
								<span>AFILIADOS</span>
							</h5>
							<div class="container-fluid con-margin" ng-hide="view">
								<div class="row">
									<div class="col-xs-1"></div>
									<div class="col-xs-11" style="border:solid 1px">
										<div class="row">
											<div class="col-xs-12">
												<div class="col-xs-3" style="color: #337ab7;">Nombre</div>
												<div class="col-xs-2" style="color: #337ab7;" ">Tipo</div>
												<div class="col-xs-3 " style="color: #337ab7; "">Fecha de Nacimeinto</div>
												<div class="col-xs-3" style="color: #337ab7;" ">Fecha de Efectividad</div>
											</div>
										</div>
										<div class="row " ng-repeat="affiliate in catalog.affiliates_obj ">
											<div class="col-xs-12 ">
												<div class="col-xs-3 ">{{ affiliate.name }}</div>
												<div class="col-xs-2 ">{{ affiliate.type }}</div>
												<div class="col-xs-3 ">{{ affiliate.dob }}</div>
												<div class="col-xs-3 ">{{ affiliate.edate }}</div>
											</div>
										</div>
									</div>
							</div>
						</div>
						<div class="form-section " id="section-2 ">
							<h5 >
								<span>EXCLUSIONES / ENMIENDAS</span>
							</h5>
							<div class="container-fluid con-margin " ng-hide="view ">
								<div class="col-xs-12 ">
									<div class="col-xs-3 " style="text-align:center ">Afiliado</div>
									<div class="col-xs-2 " style="text-align:center ">F. Nacimiento</div>
									<div class="col-xs-3 " style="text-align:center ">Tipo</div>
									<div class="col-xs-3 " style="text-align:center ">Descripción</div>
									<div class="col-xs-1 "></div>
								</div>
								<new-extra ng-repeat="extra in form.extras " >
								</new-extra>
								<div ng-if="!viewprocess ">
	                                <div class="row ">
	                                    <div class="col-sm-12 ">
	                                        <a ng-click="addExtras() " class="btn btn-sm btn-success ">
	                                        	<span class="glyphicon glyphicon-plus "></span> Agregar Exclusiones / Enimiendas</a>
	                                    </div>
	                                </div>
	                            </div>
							</div>
						</div>
						<div class="form-section " id="section-3 ">
							<h5 >
								<span> ANEXOS </span>
							</h5>
							<div class="container-fluid con-margin " ng-hide="view ">
								<div class="col-xs-12 ">
									<div class="col-xs-3 " style="text-align:center ">Afiliado</div>
									<div class="col-xs-3 " style="text-align:center ">Anexo</div>
									<div class="col-xs-3 " style="text-align:center ">Fecha Efectiva</div>
									<div class="col-xs-1 " style="text-align:center "></div>
								</div>
								<new-annex ng-repeat="annex in form.annexes " >
								</new-annex>
								<div ng-if="!viewprocess ">
	                                <div class="row ">
	                                    <div class="col-sm-12 ">
	                                        <a ng-click="addAnnexes() " class="btn btn-sm btn-success ">
	                                        	<span class="glyphicon glyphicon-plus "></span> Agregar Anexos</a>
	                                    </div>
	                                </div>
	                            </div>
							</div>
						</div>
						<div class="form-section " id="section-3 ">
							<h5 >
								<span> PAGOS </span>
							</h5>
							<div class="container-fluid con-margin " ng-hide="view ">
								<div class="row ">
									<div class="form-group ">
									    <label for="cname " class="col-xs-12 col-sm-3 control-label ">Fecha Efectividad:</label>
									    <div class="col-xs-12 col-sm-9 col-md-6 " style="margin-top:7px ">
								    		<span name="defective ">{{ catalog.effective_date }}</span>
									    </div>
								    </div>
									<div class="form-group ">
									    <label for="numquotes " class="col-xs-12 col-sm-3 control-label ">Modo de Pago:</label>
									    <div class="col-xs-12 col-sm-9 col-md-6 " style="margin-top:7px ">
								    		<span name="numquotes ">{{ catalog.number_payments }}</span>
									    </div>
								    </div>
								</div>
								<div class="row " ng-repeat="(index, cost) in policy_cost ">
									<div class="form-group " ng-if="index!='total_cost' ">
										<label for="cname " class="col-xs-12 col-sm-3 control-label " style="color: #337ab7; ">Cuota {{ cost.quote_number }}:</label>
										<div class="col-xs-12 col-sm-9 col-md-6 " style="margin-top:7px; ">
											<table class="table table-bordered ">
												<thead>
													<tr>
														<th>#</th>
														<th>Detalle</th>
														<th>Valor</th>
														<th></th>
													</tr>
												</thead>
												<tbody>
													<tr ng-repeat="item in cost.itemPrimes ">
														<td>
															<span>{{$index+1}}</span>
														</td>
														<td class="col-xs-12 col-sm-9 ">
															<div ng-if="item.new ">
																<input
																	type="text "
																	name="concept "
																	ng-model="item.concept "
																	required="1 "
																>
															</div>
															<spam ng-if="!item.new ">
																{{ item.concept }}
															</spam>
														</td>
														<td >
															<input
																type="number "
																min="0.00 "
																name="value "
																step="0.01 "
																ng-model="item.value "
																required="1 "
																ng-change="changePayment(cost) "
																style="text-align:right "
																>
														</td>
														<td>
															<button ng-if="$index==0 " class="btn btn-sm btn-success " ng-click="addCostDetail(cost.itemPrimes) ">
																<i class="glyphicon glyphicon-plus "></i>
															</button>
															<button ng-if="item.new " class="btn btn-sm btn-danger " ng-click="deleteCostDetail(cost.itemPrimes,item) ">
																<i class="glyphicon glyphicon-trash "></i>
															</button>
														</td>
													</tr>
													<tr>
														<td></td>
														<td colspan="2 ">
															<strong>Descuentos</strong>
														</td>
														<td></td>
													</tr>
													<tr ng-repeat="discount in cost.discounts ">
														<td>

														</td>
														<td>
															<input
																type="text "
																name="discpunt_concept "
																ng-model="discount.concept "
																required="1 " >
														</td>
														<td>
															<input
																type="number "
																min="0.00 "
																step="0.01 "
																name="discount_value "
																ng-model="discount.value "
																required="1 "
																ng-change="changePayment(cost) "
																style="text-align:right; ">
														</td>
														<td>
															<button ng-if="$index==0 " class="btn btn-sm btn-success " ng-click="addDiscount(cost.discounts) ">
																<i class="glyphicon glyphicon-plus "></i>
															</button>
															<button  ng-if="$index!=0 " class="btn btn-sm btn-danger " ng-click="deleteDiscount(cost.discounts,discount) ">
																<i class="glyphicon glyphicon-trash "></i>
															</button>
														</td>
													</tr>
													<tr>
														<td></td>
														<td colspan="2 ">
															<strong>Impuestos</strong>
														</td>
														<td></td>
													</tr>
													<tr ng-repeat="item in cost.itemTaxes ">
														<td>
															<span>{{$index+1}}</span>
														</td>
														<td class="col-xs-12 col-sm-9 ">
															<div ng-if="item.new ">
																<input
																	type="text "
																	name="concept "
																	ng-model="item.concept "
																	required="1 "
																>
															</div>
															<spam ng-if="!item.new ">
																{{ item.concept }}
															</spam>
														</td>
														<td >
															<input
																type="number "
																min="0.00 "
																step="0.01 "
																name="value "
																ng-model="item.value "
																required="1 "
																ng-change="changePayment(cost) "
																style="text-align:right "
																>
														</td>
														<td>
															<button ng-if="$index==0 " class="btn btn-sm btn-success " ng-click="addCostTaxes(cost.itemTaxes) ">
																<i class="glyphicon glyphicon-plus "></i>
															</button>
															<button ng-if="item.new " class="btn btn-sm btn-danger " ng-click="deleteCostTaxes(cost.itemTaxes,item) ">
																<i class="glyphicon glyphicon-trash "></i>
															</button>
														</td>
													</tr>
													<tr >
														<td>

														</td>
														<td>
															<strong>Total Cuota</strong>
														</td>
														<td>
															<input
																type="number "
																min="0.00 "
																name="total "
																ng-model="cost.total_quote "
																required="1 "
																ng-change="changePayment(cost) "
																ng-disabled="1 "
																style="text-align:right; font-weight: bold; "
																>
														</td>
														<td>
														</td>
													</tr>
												</tbody>
											</table>
										</div>
									</div>
								</div>
								<div class="row ">
									<div class="form-group ">
										<label for="cname " class="col-xs-12 col-sm-3 control-label " style="color: #337ab7; ">Total a Pagar:</label>
										<div class="col-xs-12 col-sm-9 col-md-6 " style="margin-top:7px ">
											<span style="font-weight:bold "> {{ total_amount | currency:$:2 }} </span>
										</div>
									</div>
								</div>
							</div>
						</div>
				    </form>
				</div>
				<div class="modal-footer ">
					<button type="submit " ng-click="submit() " ng-disabled="modalForm.$invalid || checking==true " class="btn btn-primary pull-right ">
                        <span ng-show="!checking ">Enviar Formulario</span>
                        <btn-spinner ng-show="checking "></btn-spinner>
                    </button>
					<a ng-show="!checking " ui-sref="^ " class="btn btn-link pull-right ">Regresar</a>
				</div>
			</div>
		</div>
	</div>
</div>
